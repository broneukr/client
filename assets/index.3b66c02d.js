import{R as r,H as S,s as L,G as w,c as T,a as y,g as b,A as R,I as A,r as k,p as d,b as O,T as f,d as _,e as U,f as v}from"./vendor.139fd151.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}})();const I="modulepreload",D=function(n){return"/"+n},E={},h=function(o,s,i){return!s||s.length===0?o():Promise.all(s.map(e=>{if(e=D(e),e in E)return;E[e]=!0;const t=e.endsWith(".css"),c=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${c}`))return;const a=document.createElement("link");if(a.rel=t?"stylesheet":I,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t)return new Promise((u,l)=>{a.addEventListener("load",u),a.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${e}`)))})})).then(()=>o())};const P=r.createContext({value:"https://webhook-store.herokuapp.com",setValue:n=>{}}),C="identityToken",g="accessToken",N=n=>{const s=`${new URL(n).origin}/graphql`,i=s.replace("http","ws"),e=new S({uri:s}),t=L(async(u,{headers:l})=>{var p=localStorage.getItem(g);if(!p){const m=localStorage.getItem(C);m&&(p=await V(m,n))}return{headers:{...l,authorization:p?`Bearer ${p}`:""}}}),c=new w(T({url:i})),a=y(({query:u})=>{const l=b(u);return l.kind==="OperationDefinition"&&l.operation==="subscription"},c,t.concat(e));return new R({link:a,cache:new A})},V=async(n,o)=>{const s=new URL(o).hostname,t=(await(await fetch(`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_AUTH_TENANT_URL}/webhook-store-auth/access-token`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({webhookStoreUrl:s})})).json()).accessToken;return localStorage.setItem(g,t),t},H=(n,o,s)=>{const i=localStorage.getItem(n)||o,[e,t]=k.exports.useState(i);return[e,a=>{s(a)?(localStorage.setItem(n,a),t(a)):console.warn("invalid new value, not stored"),d.capture(`${n} update attempt`,{value:a})}]};function W(n){let o;try{o=new URL(n)}catch{return!1}return o.protocol==="http:"||o.protocol==="https:"}const $=r.lazy(()=>h(()=>import("./index.81e8a431.js"),["assets/index.81e8a431.js","assets/index.447dfe89.css","assets/index.b811c63c.js","assets/index.7eb7bce9.css","assets/vendor.139fd151.js","assets/index.32b7bafa.js","assets/index.47fc0884.css"])),B=r.lazy(()=>h(()=>import("./TopNav.733f07d4.js"),["assets/TopNav.733f07d4.js","assets/TopNav.d664add3.css","assets/vendor.139fd151.js","assets/animation-container.87b3cd17.js","assets/animation-container.7a60cc3d.css","assets/index.b811c63c.js","assets/index.7eb7bce9.css"])),x=r.lazy(()=>h(()=>import("./WebhookList.component.ab487cd2.js"),["assets/WebhookList.component.ab487cd2.js","assets/WebhookList.component.42ce049d.css","assets/vendor.139fd151.js","assets/animation-container.87b3cd17.js","assets/animation-container.7a60cc3d.css","assets/index.b811c63c.js","assets/index.7eb7bce9.css","assets/index.32b7bafa.js","assets/index.47fc0884.css"]));function M(){const n=window.location.hostname==="demo.openwebhook.io"?"https://webhook-store.herokuapp.com":window.location.origin,[o,s]=H("webhookStoreUrl",n,W);return r.createElement(P.Provider,{value:{value:o,setValue:s}},r.createElement(O,{client:N(o)},r.createElement(f,{name:f.names.dark},r.createElement(k.exports.Suspense,{fallback:r.createElement("div",null,"Loading...")},r.createElement($,{topnav:r.createElement(B,null)},r.createElement(x,null))))))}const q=window.location.hostname==="github.webhook.store";q&&(window.location.href=`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_AUTH_TENANT_URL}/oauth/login`);_.configure({apiKey:{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_HONEYBADGER_API_KEY,environment:"production"});d.init({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_POSTHOG_API_KEY,{api_host:"https://app.posthog.com"});d.capture("my event",{property:"value"});const K=U.createRoot(document.getElementById("root"));K.render(r.createElement(v,{honeybadger:_},r.createElement(r.StrictMode,null,r.createElement(M,null))));export{g as A,C as I,P as W,h as _};
//# sourceMappingURL=index.3b66c02d.js.map
